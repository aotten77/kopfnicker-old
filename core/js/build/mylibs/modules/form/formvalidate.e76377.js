define(["jquery","_super","jquery_validate","overwritings.jquery_validate","add-ons.formvalidate"],function(a,b){"use strict";var c=a.extend({},b,{init:function(c,d){return this.options=a.extend({},this.options,c),this.name=this.options.pluginName,this.pos=this.options.pos,this.jmname=this.options.jmname,this.$elem=a(d),b.config.call(this),this.onInitExec(),this},onInitExec:function(){},options:{},_exec:function(){var b=this;return this.$elem.validate({onchange:function(a,b){this.element(a,b)},groups:b._getGroups(),errorPlacement:function(b,c){var d=c.attr("name"),e=a.map(this.groups,function(a){var b;return a.indexOf(d)>=0?(b=a.split(" "),b[b.length-1]):null})[0];b.insertAfter(e?c.is("[data-jmerrorplacement='parent']")?a("select[name='"+e+"']").parent():a("select[name='"+e+"']"):c.is("[data-jmerrorplacement='parent']")?c.parent():c)},ignore:["input[type:hidden]"],onfocusout:function(a,b){this.checkable(a)||!(a.name in this.submitted)&&this.optional(a)||this.element(a,b)},onkeyup:function(b,c){9===c.which&&""===this.elementValue(b)||a(b).attr("data-rule-jmlandingpageurlcheck")||a(b).attr("data-rule-jmurlcheck")||(b.name in this.submitted||b===this.lastElement)&&this.element(b,c)},onclick:function(a,b){a.name in this.submitted?this.element(a,b):a.parentNode.name in this.submitted&&this.element(a.parentNode,b)},errorElement:"span",submitHandler:function(c){a.doTimeout("submitTimer",200,function(){return b.is("ajax","false")?(-1!==b.$elem.attr("action").indexOf("_")&&b.$elem.attr("action",b.$elem.attr("action").replace("_","")),void c.submit()):void a.ajax({type:"POST",url:b._getUrl(),beforeSend:function(){},data:b.$elem.serialize()}).done(function(a){b.$elem.trigger({type:"jm.done",response:a,validateTriggerTarget:b.targetElement})}).always(function(){}).fail(function(){})})},invalidHandler:function(){jmGO.submit=!1}})},checkValidation:function(a){this.targetElement=a.target},_getUrl:function(){return a.type("undefined"!==this.$elem.attr("action"))?this.$elem.attr("action"):a.type("undefined"!==this.$elem.data("jmaction"))?this.$elem.data("jmaction"):this.options.contentUrl},_getGroups:function(){var b={};return this.$elem.find(".js-validate-group").each(function(c){a(this).find("input:not(:hidden), select, textarea").each(function(){b["groupname"+c]="undefined"!==a.type(b["groupname"+c])?b["groupname"+c]+" "+a(this).attr("name"):a(this).attr("name")})}),b},_saveInputValues:function(){var a=this;this.warning&&(this.valueObj=this.$elem.serialize(),this.$elem.on("keyup click",function(){window.AnyFormChanges=a.valueObj===a.$elem.serialize()?{bool:!1,target:a.$elem}:{bool:!0,target:a.$elem}}))},isValidat:function(){return this.$elem.valid()}});return a.plugin("modules.form.formvalidate",c),c});