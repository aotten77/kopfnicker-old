define(["jquery","_config","utils.jquery_helpers","utils.helpers"],function($,_config){"use strict";return{config:function(){this.myPos=this.pos,this.myJmName=this.jmname,this.myJmNamePos=$.inArray(this.myJmName,this.$elem.data("jmname").split("|")),this.waited=!1,this.$elem.addClass("JSINIT-"+this.myJmName+"-EL-"+this.name)},click:function(){this.includes("event","click")&&this.is("condition")&&this._exec()},change:function(){this.includes("event","change")&&this.is("condition")&&this._exec()},submit:function(){this.includes("event","submit")&&this.is("condition")&&this._exec()},dominit:function(){var a=this;this.includes("event","dominit")&&this.is("condition")&&this._exec(),this.includes("event","raf")&&(this.conditionSource=this.is("condition","source"),this.rAFRender=window.requestAnimationFrame(this._render.bind(this))),this.partOf("event","interval")&&setInterval(function(){a.is("condition")&&a._exec()},parseInt(this.getPartOf("event","interval").split("interval-")[1],10)),this._initListeners()},_initListeners:function(){this.includes("event","blur")&&this.$elem.on("blur",this._blur.bind(this)),this.includes("event","focus")&&this.$elem.on("focus",this._focus.bind(this)),this.includes("event","hover")&&this.$elem.on("mouseover",this._hover.bind(this)),this.partOf("event","keyup")&&this.$elem.on("keyup",this._keyup.bind(this)),this.includes("event","jmchange")&&this.$elem.on("jmchange",this._jmchange.bind(this))},is:function(p_dataAttr,p_value,p_now){var _now="undefined"!==$.type(p_now)&&p_now===!0,_return;return this.configObj=this._getConfigObjArray(_now),"undefined"!==$.type(p_dataAttr)&&("undefined"!==$.type(p_value)?_return="condition"===p_dataAttr&&"source"===p_value?"undefined"!==$.type(this.configObj[p_dataAttr])&&this.configObj[p_dataAttr]:"undefined"!==$.type(this.configObj[p_dataAttr])&&this.configObj[p_dataAttr]===p_value:(_return="undefined"!==$.type(this.configObj[p_dataAttr])?this.configObj[p_dataAttr]:"","condition"===p_dataAttr&&(_return=""!==_return?eval(_return):!0),"relatedTo"===p_dataAttr&&""!==_return&&(_return=-1!==this.configObj.relatedTo.indexOf("this.")?eval(_return):_return),"scrollTo"===p_dataAttr&&""!==_return&&(_return=-1!==this.configObj.scrollTo.indexOf("this.")?eval(_return):_return),"data"===p_dataAttr&&""!==_return&&(_return=-1!==this.configObj.data.indexOf("this.")?eval(_return):_return),"additionalloadertarget"===p_dataAttr&&""!==_return&&(_return=-1!==this.configObj.additionalloadertarget.indexOf("this.")?eval(_return):_return))),_return},isNow:function(a,b){this.is(a,b,!0)},includes:function(a,b,c){var d="undefined"!==$.type(c)&&c===!0;return this.configObj=this._getConfigObjArray(d),"undefined"!==$.type(this.configObj[a])&&-1!==$.inArray(b,this.configObj[a].split("|"))},includesNow:function(a,b){this.contains(a,b,!0)},partOf:function(a,b,c){var d="undefined"!==$.type(c)&&c===!0;return this.configObj=this._getConfigObjArray(d),"undefined"!==$.type(this.configObj[a])&&-1!==$.inArray(!0,$.map(this.configObj[a].split("|"),function(a){return a.indexOf(b)>-1}))},partOfNow:function(a,b){this.partOf(a,b,!0)},getPartOf:function(a,b,c){var d,e="undefined"!==$.type(c)&&c===!0;return this.configObj=this._getConfigObjArray(e),"undefined"!==$.type(this.configObj[a])&&(d=$.map(this.configObj[a].split("|"),function(a){return a.indexOf(b)>-1?a:void 0})[0]),d||""},_getConfigObjArray:function(a){return"undefined"===$.type(this.initConfigObj)||a?"undefined"!==$.type(this.$elem.data("jmname"))?"undefined"===$.type(this.$elem.data("jmconfig"))?(this.initConfigObj=this.staticObj||this._getStaticConfigObj(),this.initConfigObj):this.initConfigObj=$.extend({},this.staticObj||this._getStaticConfigObj(),this._getObjFromDom(a)):this.initConfigObj="undefined"!==$.type(this.$elem.data("jmconfig"))?this._getObjFromDom(a):{}:this.initConfigObj},_getObjFromDom:function(a){var b;return a||"undefined"===$.type(this.staticObjFromDom)?(b="string"!==$.type(this.$elem.data("jmconfig"))?this.$elem.data("jmconfig"):JSON.parse(this.$elem.data("jmconfig").replace(/'/g,'"')),"object"===$.type(b)?this.staticObjFromDom=b:"object"===$.type(b[this.myJmNamePos])?this.staticObjFromDom=b[this.myJmNamePos]:b.length<this.myJmNamePos+1?(jmHF.warn("die Anzahl ("+b.length+') der data-jmconfig-Arrays sind nicht identisch mit der Anzahl der im data-jmname (data-jmname="'+this.$elem.data("jmname")+'") angegebenen jmnamen. Die könnte zu problemen führen.'),this.staticObjFromDom=void 0):this.staticObjFromDom=b[this.myJmNamePos][this.myPos]):this.staticObjFromDom},_reverse:function(a){for(var b=[],c=0,d=a.length;d>=c;c++)b.push(a.charAt(d-c));return b.join("")},_getStaticConfigObj:function(){for(var a=this.myJmName,b=0,c=_config.length;c>b;b++)if(_config[b].jmname===a){if("array"!==$.type(_config[b].jmconfig)){this.staticObj=_config[b].jmconfig;break}this.staticObj=_config[b].jmconfig[this.myPos];break}return this.staticObj},_wait:function(){return function(){}},_jmchange:function(){this.is("condition")&&this._exec()},_hover:function(){this.is("condition")&&this._exec()},_blur:function(){this.is("condition")&&this._exec()},_focus:function(){this.is("condition")&&this._exec()},_keyup:function(){this.is("condition")&&$.doTimeout("JSINIT-"+this.myJmName+"-el-"+this.name,parseInt(this.getPartOf("event","dotimeout").split("dotimeout-")[1],10),this._exec.bind(this))},_scrollTo:function(){$(this.is("scrollTo")).scrollToMe(""!==this.is("scrollToOffset")?parseInt(this.is("scrollToOffset"),10):0)}}});